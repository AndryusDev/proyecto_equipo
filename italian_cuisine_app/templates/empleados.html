{% extends "_base.html" %}
{% load static %}

{% block title %}Lista de Empleados{% endblock %}

{% block content %}
    <h1>Lista de Empleados</h1>
    <div class="top-actions">
        <a href="{% url 'empleado_create' %}" class="btn btn-new">+ Nuevo empleado</a>
    </div>

    {% if empleados %}
        <table class="db-table" aria-describedby="empleados-table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>Cargo</th>
                    <th>Teléfono</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for empleado in empleados %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ empleado.first_name }}</td> 
                    <td>{{ empleado.last_name }}</td>
                    <td>{{ empleado.get_cargo_display }}</td>
                    <td>{{ empleado.telefono|default:"-" }}</td>
                    <td>
                        <span class="actions">
                            <a class="btn btn-small btn-new" href="{% url 'empleado_detail' empleado.pk %}">Ver</a>
                            <a class="btn btn-small btn-new" href="{% url 'empleado_edit' empleado.pk %}">Editar</a>
                            <a class="btn btn-small btn-outline" href="{% url 'empleado_delete' empleado.pk %}">Eliminar</a>
                        </span>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        {# Paginación simple #}
        {% if is_paginated %}
        <nav aria-label="Paginación empleados">
            <ul style="list-style:none; padding:0; display:flex; gap:8px; margin-top:12px;">
                {% if page_obj.has_previous %}
                    <li><a href="?page={{ page_obj.previous_page_number }}">« Anterior</a></li>
                {% else %}
                    <li style="color:#ffffff">« Anterior</li>
                {% endif %}

                <li>Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}</li>

                {% if page_obj.has_next %}
                    <li><a href="?page={{ page_obj.next_page_number }}">Siguiente »</a></li>
                {% else %}
                    <li style="color:#999">Siguiente »</li>
                {% endif %}
            </ul>
        </nav>
        {% endif %}
    {% else %}
        <p class="empty-msg">No hay empleados para mostrar.</p>
    {% endif %}

{% endblock %}